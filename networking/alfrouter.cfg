!
version 12.4
no service pad
service timestamps debug datetime msec
service timestamps log datetime msec
service password-encryption
!
hostname alfrouter
!
boot-start-marker
boot-end-marker
!
no logging buffered
no logging console
no logging monitor
enable password <redacted>
!
no aaa new-model
!
no ip source-route
!
ip cef
ip dhcp relay information trust-all
no ip dhcp use vrf connected
ip dhcp excluded-address 192.168.0.0 192.168.0.100
ip dhcp excluded-address 172.16.0.0 172.16.0.20
ip dhcp excluded-address 172.16.1.0 172.16.1.20
!
ip dhcp pool Workgroup
   network 192.168.0.0 255.255.255.0
   default-router 192.168.0.1 
   dns-server 1.1.1.1 8.8.8.8
!
ip dhcp pool Servers
   network 172.16.0.0 255.255.255.0
   default-router 172.16.0.1 
   dns-server 1.1.1.1 8.8.8.8
!
ip dhcp pool Management
   network 172.16.1.0 255.255.255.0
   default-router 172.16.1.0
   dns-server 1.1.1.1 8.8.8.8
!
no ip bootp server
ip domain name home.lan
!
multilink bundle-name authenticated
!
voice-card 0
 no dspfarm
!
username flacko secret <redacted>
! 
archive
 log config
  hidekeys
!
ip ssh version 2
!
bba-group pppoe global
!
interface GigabitEthernet0/0
 description WAN uplink
 no ip address
 ip access-group OUTSIDE-IN in
 no ip proxy-arp
 duplex auto
 speed auto
 pppoe enable group global
 pppoe-client dial-pool-number 1
!
interface GigabitEthernet0/1
 ip address 172.16.2.1 255.255.255.252
 ip access-group POST-NAT-FILTER in
 no ip proxy-arp
 ip nat inside
 no ip virtual-reassembly
 duplex auto
 speed auto
!
interface Serial0/0/0
 no ip address
 shutdown
 no fair-queue
 clock rate 2000000
!
interface Serial0/0/1
 no ip address
 shutdown
 clock rate 2000000
!
interface Dialer1
 mtu 1492
 ip address negotiated
 ip access-group OUTSIDE-IN in
 ip nat outside
 no ip virtual-reassembly
 encapsulation ppp
 dialer pool 1
 dialer-group 1
 no cdp enable
 ppp chap hostname <redacted>
 ppp chap password 7 <redacted>
 ppp pap sent-username <redacted> password 7 <redacted>
!
no ip forward-protocol nd
ip route 0.0.0.0 0.0.0.0 Dialer1
ip route 172.16.0.0 255.255.254.0 172.16.2.2
ip route 192.168.0.0 255.255.255.0 172.16.2.2
!
no ip http server
no ip http secure-server
ip nat translation max-entries 500
ip nat inside source list NET_INSIDE interface Dialer1 overload
!
ip access-list standard NET_INSIDE
 permit 172.16.0.0 0.0.1.255
 permit 192.168.0.0 0.0.0.255
 permit 172.16.2.0 0.0.0.255
!
ip access-list extended OUTSIDE-IN
 10 permit tcp any any established
 11 permit udp any eq 443 any
 12 permit udp any eq domain any
 13 permit udp any eq ntp any
 remark === Steam traffic ===
 20 permit udp any range 27015 27036 any
 21 permit udp any eq 3478 any
 22 permit udp any eq 4379 any
 23 permit udp any eq 4380 any
 remark === Hunter: Call of the Wild ===
 30 permit udp any range 27000 27031 any
 31 permit udp any eq 27036 any
 32 permit udp any any eq 32303
 remark === Cisco IPSec VPN ===
 40 permit udp any eq non500-isakmp any
 41 permit udp any eq isakmp any 
 42 permit esp any any
 remark === Discord voice traffic ===
 50 permit udp any range 50000 65535 any
 remark === ICMP for diagnostics ===
 60 permit icmp any any echo-reply
 61 permit icmp any any time-exceeded
 62 permit icmp any any unreachable
 remark === Deny all else and log ===
 70 deny ip any any log
ip access-list extended POST-NAT-FILTER
 remark === Core traffic allowed ===
 10 permit tcp any any established
 11 permit udp any any eq 443
 12 permit udp any any eq domain
 13 permit udp any any eq ntp
 remark === Block all other UDP to server and uplink subnets ===
 20 deny   udp any 172.16.0.0 0.0.1.255
 21 deny   udp any 172.16.2.0 0.0.0.255
 remark === Allow everything else ===
 30 permit ip any any
!
no logging trap
access-list 10 permit 172.16.0.0 0.0.255.255
no cdp run
!
control-plane
!
line con 0
 logging synchronous
line aux 0
line vty 0 4
 logging synchronous
 login local
 transport input ssh
line vty 5 15
 access-class 10 in
 logging synchronous
 login local
 transport input ssh
!
scheduler allocate 20000 1000
!
end
